// prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Define your models using Prisma's schema language
model Company {
  id          String   @id @default(cuid())
  name        String
  industry    Industry
  size        CompanySize
  location    Json     // Store city, state, country as a JSON object
  revenue     String?
  website     String?
  description String?
  
  // Company metrics stored as JSON
  metrics     Json     @default("{}")
  
  // Relationships
  employees   Person[]
  
  // Timestamps
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Add an index for better search performance
  @@index([name])
}

model Person {
  id           String      @id @default(cuid())
  firstName    String
  lastName     String
  title        String
  email        String?     @unique
  emailStatus  EmailStatus @default(unverified)
  bio          String?
  
  // Relationships
  company      Company     @relation(fields: [companyId], references: [id])
  companyId    String
  
  // Contact and social info stored as JSON
  contactInfo  Json        @default("{}")
  socialLinks  Json        @default("{}")
  
  // Timestamps
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt

  @@index([firstName, lastName])
  @@index([email])
}

// Define custom enums for type safety
enum Industry {
  Technology
  Healthcare
  Finance
  Manufacturing
  Retail
  Education
  Other
}

enum CompanySize {
  SIZE_1_10      @map("1-10")
  SIZE_11_50     @map("11-50")
  SIZE_51_200    @map("51-200")
  SIZE_201_1000  @map("201-1000")
  SIZE_1001_5000 @map("1001-5000")
  SIZE_5000_PLUS @map("5000+")
}

enum EmailStatus {
  verified
  unverified
  invalid
}